"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.main = exports.TransformerContext = void 0;
var main_visitor_factory_1 = __importDefault(require("./main_visitor_factory"));
var TransformerContext = /** @class */ (function () {
    function TransformerContext(program, config, context) {
        this.program = program;
        this.config = config;
        this.context = context;
    }
    return TransformerContext;
}());
exports.TransformerContext = TransformerContext;
/**
 * The starting point of the transformer.
 * Sets up the mainVisitor.
 */
var main = function (program, config) {
    //TODO validate config
    return function (context) {
        var Context = new TransformerContext(program, config !== null && config !== void 0 ? config : {}, context);
        var visitor = (0, main_visitor_factory_1.default)(Context);
        return function (sourceFile) {
            return visitor(sourceFile);
        };
    };
};
exports.main = main;
exports.default = exports.main;
